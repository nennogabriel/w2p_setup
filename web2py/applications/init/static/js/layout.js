function getOptimalSizeName(e,t){var a=t.split("."),n=window.devicePixelRatio,i=e.width,o=e.height;if(2==a.length){i=Math.ceil(i*Math.sqrt(n)),o=Math.ceil(o*Math.sqrt(n));var r=i+"x"+o;a.splice(1,0,r)}else{var l="x",s=a[1];"device"===s?(i=$(window).width(),o=$(window).height()):"max"===s||"min"===s?(l="max"===s?Math.max(i,o):Math.min(i,o),i="",o=""):(l=s,i="",o=""),i&&(i=Math.ceil(i*Math.sqrt(n))),o&&(o=Math.ceil(o*Math.sqrt(n))),a[1]=i+l+o}return a.join(".")}var wfiEvent=function(){var e={};return function(t,a,n){e[n]&&clearTimeout(e[n]),e[n]=setTimeout(t,a)}}();$("a.btn, button.btn, .btn-large, .nav a.button-collapse").addClass("waves-effect waves-light"),$("body").velocity({opacity:1,animation:"none"},{duration:500}),function($,undefined){$.web2py!==undefined&&$.error("web2py.js has already been loaded!"),String.prototype.reverse=function(){return this.split("").reverse().join("")};var web2py;$.web2py=web2py={popup:function(e){return newwindow=window.open(e,"name","height=400,width=600"),window.focus&&newwindow.focus(),!1},collapse:function(e){$("#"+e).slideToggle()},fade:function(e,t){t>0?$("#"+e).hide().fadeIn("slow"):$("#"+e).show().fadeOut("slow")},ajax:function(u,s,t){if(query="","string"==typeof s)d=$(s).serialize(),d&&(query=d);else{if(pcs=[],null!=s&&s!=undefined)for(i=0;i<s.length;i++)q=$("[name="+s[i]+"]").serialize(),q&&pcs.push(q);pcs.length>0&&(query=pcs.join("&"))}$.ajax({type:"POST",url:u,data:query,success:function(msg){t&&(":eval"==t?eval(msg):"string"==typeof t?$("#"+t).html(msg):t(msg))}})},ajax_fields:function(e){$('button:not([class^="btn"])',e).addClass("btn"),$('form input[type="submit"]:not([class^="btn"]), form input[type="button"]:not([class^="btn"])',e).addClass("btn"),$("input[type=password][data-w2p_entropy]",e).each(function(){web2py.validate_entropy($(this))}),$("ul.w2p_list",e).each(function(){function e(e,t){var i=a(e);return n(e),$(t.target).parent().is(":visible")?i.insertAfter($(t.target).parent()):i.appendTo(e),i.find(":text").focus(),!1}function t(e,t){$(e).children().length>1&&$(t.target).parent().remove()}function a(e){var t=$(e).find("li:first").clone(!0);return t.find(":text").val(""),t}function n(e){$(e).find("li").each(function(){var e=$.trim($(this.firstChild).val());""==e?$(this).remove():$(this.firstChild).val(e)})}var i=this;$(i).find(":text").after('<a class="btn" href="#">+</a><a class="btn" href="#">-</a>').keypress(function(t){return 13!=t.which||e(i,t)}).next().click(function(t){e(i,t),t.preventDefault()}).next().click(function(e){t(i,e),e.preventDefault()})})},ajax_init:function(e){$(".w2p_hidden",e).hide(),web2py.manage_errors(e),web2py.ajax_fields(e),web2py.show_if_handler(e),web2py.component_handler(e)},manage_errors:function(e){$("div.error",e).hide().slideDown("slow")},after_ajax:function(xhr){var command=xhr.getResponseHeader("web2py-component-command"),flash=xhr.getResponseHeader("web2py-component-flash");null!==command&&eval(decodeURIComponent(command)),flash&&Materialize.toast(decodeURI(flash),4e3)},event_handlers:function(){var e=$(document);e.on("click",".w2p_flash",function(e){var t=$(this);"0px"==t.css("top")?t.slideUp("slow"):t.fadeOut()}),e.on("keyup","input.integer",function(){var e=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,"").reverse();this.value!=e&&(this.value=e)}),e.on("keyup","input.double, input.decimal",function(){var e=this.value.reverse().replace(/[^0-9\-\.,]|[\-](?=.)|[\.,](?=[0-9]*[\.,])/g,"").reverse();this.value!=e&&(this.value=e)});var t="undefined"!=typeof w2p_ajax_confirm_message?w2p_ajax_confirm_message:"Are you sure you want to delete this object?";e.on("click","input[type='checkbox'].delete",function(){this.checked&&(web2py.confirm(t)||(this.checked=!1))});var a="undefined"!=typeof w2p_ajax_datetime_format?w2p_ajax_datetime_format:"%Y-%m-%d %H:%M:%S";e.on("click","input.datetime",function(){var e=$(this).data("w2p_datetime_format"),t=$(this).data("w2p_datetime"),n="undefined"!=typeof e?e:a;t===undefined&&(Calendar.setup({inputField:this,ifFormat:n,showsTime:!0,timeFormat:"24"}),$(this).attr("autocomplete","off"),$(this).data("w2p_datetime",1),$(this).trigger("click"))});var n="undefined"!=typeof w2p_ajax_date_format?w2p_ajax_date_format:"%Y-%m-%d";e.on("click","input.date",function(){var e=$(this).data("w2p_date_format"),t=$(this).data("w2p_date"),a="undefined"!=typeof e?e:n;t===undefined&&(Calendar.setup({inputField:this,ifFormat:a,showsTime:!1}),$(this).data("w2p_date",1),$(this).attr("autocomplete","off"),$(this).trigger("click"))}),e.on("focus","input.time",function(){var e=$(this).data("w2p_time");e===undefined&&($(this).timeEntry({spinnerImage:""}).attr("autocomplete","off"),$(this).data("w2p_time",1))}),$(e).on("submit","form",function(){var e=$(this).find(web2py.formInputClickSelector);web2py.disableElement(e)}),e.ajaxSuccess(function(e,t){var a=t.getResponseHeader("web2py-redirect-location");null!==a&&(window.location=a),null==t.getResponseHeader("web2py-component-content")&&web2py.after_ajax(t)}),e.ajaxError(function(e,t,a,n){switch(t.status){case 500:web2py.flash(ajax_error_500)}})},trap_form:function(e,t){$("#"+t+" form").each(function(a){var n=$(this);if(!n.hasClass("no_trap")){var i=$(this).attr("data-w2p_target");typeof i==typeof undefined||i===!1?n.attr("data-w2p_target",t):t=i;var o=n.attr("action");""!==o&&"#"!==o&&"undefined"!=typeof o||(o=e),n.submit(function(e){web2py.disableElement(n.find(web2py.formInputClickSelector)),web2py.hide_flash(),web2py.ajax_page("post",o,n.serialize(),t,n),e.preventDefault()}),n.on("click",web2py.formInputClickSelector,function(e){e.preventDefault();var t=$(this).attr("name");t!=undefined&&$('<input type="hidden" />').attr("name",t).attr("value",$(this).val()).appendTo(n),n.trigger("submit")})}})},ajax_page:function(e,t,a,n,i){i==undefined&&(i=$(document)),n!=undefined&&""!=n||(n="w2p_none"),web2py.fire(i,"ajax:before",null,n)&&$.ajax({type:e,url:t,data:a,beforeSend:function(e,t){return e.setRequestHeader("web2py-component-location",document.location),e.setRequestHeader("web2py-component-element",n),web2py.fire(i,"ajax:beforeSend",[e,t],n)},success:function(e,t,a){web2py.fire(i,"ajax:success",[e,t,a],n)},error:function(e,t,a){web2py.fire(i,"ajax:error",[e,t,a],n)},complete:function(e,a){web2py.fire(i,"ajax:complete",[e,a],n),web2py.updatePage(e,n),web2py.trap_form(t,n),web2py.ajax_init("#"+n),web2py.after_ajax(e)}})},component:function(e,t,a,n,i){$(function(){var o=$("#"+t),r=o.get(0),l="jQuery('#"+t+"').get(0).reload();";r.reload=function(){r.reload_check()&&web2py.ajax_page("get",e,null,t,i)},r.reload_check=function(){if(o.hasClass("w2p_component_stop"))return clearInterval(this.timing),!1;if(this.reload_counter==1/0)return!0;if(!isNaN(this.reload_counter)){if(this.reload_counter-=1,!(this.reload_counter<0))return!0;if(!this.run_once)return clearInterval(this.timing),!1}return!1},isNaN(a)?(r.reload_counter=1/0,web2py.ajax_page("get",e,null,t,i)):(r.timeout=a,r.reload_counter=n,n>1?(web2py.ajax_page("get",e,null,t,i),r.run_once=!1,r.timing=setInterval(l,a),r.reload_counter-=1):1==n&&(r.run_once=!0,r.setTimeout=setTimeout,r.timing=setTimeout(l,a)))})},updatePage:function(e,t){var a=$("#"+t),n=$.parseHTML(e.responseText,document,!0),i=$(n).filter("title").add($(n).find("title")),o=i.last().text();o&&(i.remove(),document.title=$.trim(o));var r=e.getResponseHeader("web2py-component-content");"prepend"==r?a.prepend(e.responseText):"append"==r?a.append(e.responseText):"hide"!=r&&a.html(n)},calc_entropy:function(e){for(var t=new Array("abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","!@#$%^&*()","~`-_=+[]{}|;:'\",.<>?/","0123456789abcdefghijklmnopqrstuvwxyz"),a=0,n={},i={},o=null,r=e.split(""),l=0;l<r.length;l++){for(var s=r[l],d=5,p=0;p<t.length;p++)if(t[p].indexOf(s)!=-1){d=p;break}d in i?s in n||(a+=1,n[s]=1):(i[d]=1,a+=t[d].length),d!=o&&(a+=1,o=d)}var c=e.length*Math.log(a)/.6931471805599453;return Math.round(100*c)/100},validate_entropy:function(e,t){e.data("w2p_entropy")!=undefined&&(t=e.data("w2p_entropy"));var a=function(){var a=(web2py.calc_entropy(e.val())||0)/t,n=0,i=0,o=0,r=function(e){return Math.round(15*e).toString(16)};a<=.5?(n=1,i=2*a):(n=1-2*(Math.max(a,0)-.5),i=1);var l="#"+r(n)+r(i)+r(o);e.css("background-color",l),entropy_callback=e.data("entropy_callback"),entropy_callback&&entropy_callback(a)};e.hasClass("entropy_check")||e.on("keyup",a).on("keydown",a).addClass("entropy_check")},web2py_websocket:function(e,t,a,n){if("WebSocket"in window){var i=new WebSocket(e);return i.onopen=a?a:function(){},i.onmessage=t,i.onclose=n?n:function(){},!0}return!1},formInputClickSelector:"input[type=submit], input[type=image], button[type=submit], button:not([type])",disableSelector:"input, button, textarea, select",enableSelector:"input:disabled, button:disabled, textarea:disabled, select:disabled",fire:function(e,t,a,n){var i=$.Event(t,{containerTarget:$("#"+n)[0]});return e.trigger(i,a),i.result!==!1},stopEverything:function(e){return $(e.target).trigger("w2p:everythingStopped"),e.stopImmediatePropagation(),!1},confirm:function(e){return confirm(e)},disableElement:function(e){e.addClass("disabled");var t=e.is("input")?"val":"html",a="undefined"!=typeof w2p_ajax_disable_with_message?w2p_ajax_disable_with_message:"Working...";e.data("w2p_enable_with")===undefined&&e.data("w2p_enable_with",e[t]()),"default"!=e.data("w2p_disable_with")&&e.data("w2p_disable_with")!==undefined||e.data("w2p_disable_with",a),e[t](e.data("w2p_disable_with")),e.bind("click.w2pDisable",function(e){return web2py.stopEverything(e)})},enableElement:function(e){var t=e.is("input")?"val":"html";e.data("w2p_enable_with")!==undefined&&(e[t](e.data("w2p_enable_with")),e.removeData("w2p_enable_with")),e.removeClass("disabled"),e.unbind("click.w2pDisable")},simple_component:function(e,t,a){web2py.component(e,t,0,1,a)},flash:function(e,t){var a=$(".w2p_flash");web2py.hide_flash(),a.html(e).addClass(t),a.html()&&a.append('<span id="closeflash"> &times; </span>').slideDown()},hide_flash:function(){$(".w2p_flash").fadeOut(0).html("")},show_if_handler:function(e){var t={},a=function(){var a=$(this),n=a.attr("id");a.attr("value",a.val());for(var i=0;i<t[n].length;i++){var o=$("#"+t[n][i],e),r=$("#"+t[n][i]+"__row",e);a.is(o.attr("data-show-if"))?r.slideDown():r.hide()}};$("[data-show-trigger]",e).each(function(){var e=$(this).attr("data-show-trigger");$("#"+e).length&&(t[e]||(t[e]=[]),t[e].push($(this).attr("id")))});for(var n in t)$("#"+n,e).change(a).keyup(a),a.call($("#"+n,e))},component_handler:function(e){$("div[data-w2p_remote]",e).each(function(){var e,t,a,n,i=$(this);e=i.data("w2p_remote"),t=i.data("w2p_times"),a=i.data("w2p_timeout"),n=i.attr("id"),web2py.component(e,n,a,t,$(this))})},a_handler:function(el,e){e.preventDefault();var method=el.data("w2p_method"),action=el.attr("href"),target=el.data("w2p_target"),confirm_message=el.data("w2p_confirm"),pre_call=el.data("w2p_pre_call");return pre_call!=undefined&&eval(pre_call),confirm_message&&("default"==confirm_message&&(confirm_message=w2p_ajax_confirm_message||"Are you sure you want to delete this object?"),!web2py.confirm(confirm_message))?void web2py.stopEverything(e):void(target==undefined?"GET"==method?web2py.ajax_page("get",action,[],"",el):"POST"==method&&web2py.ajax_page("post",action,[],"",el):"GET"==method?web2py.ajax_page("get",action,[],target,el):"POST"==method&&web2py.ajax_page("post",action,[],target,el))},a_handlers:function(){var e=$(document);e.on("click","a[data-w2p_method]",function(e){web2py.a_handler($(this),e)}),e.on("ajax:success","a[data-w2p_method][data-w2p_remove]",function(e){var t=$(this),a=t.data("w2p_remove");a!=undefined&&(a=t.closest(a),a.length||(a=$(a)),a.remove())}),e.on("ajax:beforeSend","a[data-w2p_method][data-w2p_disable_with]",function(e){web2py.disableElement($(this))}),e.on("ajax:complete","a[data-w2p_method][data-w2p_disable_with]",function(e){web2py.enableElement($(this))})},disableFormElements:function(e){e.find(web2py.disableSelector).each(function(){var e=$(this),t=e.is("button")?"html":"val",a=e.data("w2p_disable_with");a==undefined&&e.data("w2p_disable_with",e[t]()),e.data("w2p_enable_with")===undefined&&e.data("w2p_enable_with",e[t]()),e[t](e.data("w2p_disable_with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(web2py.enableSelector).each(function(){var e=$(this),t=e.is("button")?"html":"val";e.data("w2p_enable_with")&&(e[t](e.data("w2p_enable_with")),e.removeData("w2p_enable_with")),e.prop("disabled",!1)})},form_handlers:function(){var e=$(document);e.on("ajax:beforeSend","form[data-w2p_target]",function(e){web2py.disableFormElements($(this))}),e.on("ajax:complete","form[data-w2p_target]",function(e){web2py.enableFormElements($(this))})},invalidate:function(e){$("div[data-w2p_remote]",e).each(function(){var e=$("#"+$(this).attr("id")).get(0);e.timing!==undefined&&clearInterval(e.timing)}),$.web2py.component_handler(e)},main_hook:function(){var e=$(".w2p_flash");e.hide(),e.html()&&web2py.flash(e.html()),web2py.ajax_init(document),web2py.event_handlers(),web2py.a_handlers(),web2py.form_handlers()}},$(function(){web2py.main_hook()})}(jQuery),ajax=jQuery.web2py.ajax,web2py_component=jQuery.web2py.component,web2py_websocket=jQuery.web2py.web2py_websocket,web2py_ajax_page=jQuery.web2py.ajax_page,web2py_validate_entropy=jQuery.web2py.validate_entropy,web2py_ajax_fields=jQuery.web2py.ajax_fields,web2py_trap_form=jQuery.web2py.trap_form,popup=jQuery.web2py.popup,collapse=jQuery.web2py.collapse,fade=jQuery.web2py.fade,$(".w2p-toolbar-hidden").hide(),function(e){e.fn.unveil=function(t,a){function n(){var t=l.filter(function(){var t=e(this);if(!t.is(":hidden")){var a=o.scrollTop(),n=a+o.height(),i=t.offset().top,l=i+t.height();return l>=a-r&&i<=n+r}});i=t.trigger("unveil"),l=l.not(i)}var i,o=e(window),r=t||0,l=this;return this.one("unveil",function(){var e=this.getAttribute("data-src");e&&("/"==e[0]&&"/"!=e[1]&&(e=getOptimalSizeName(this,e)),this.setAttribute("src",e),this.removeAttribute("data-src"),"function"==typeof a&&a.call(this))}),o.on("scroll.unveil resize.unveil lookup.unveil",n),n(),this}}(window.jQuery),$(document).ready(function(){$("img[data-src]").unveil(100),$(".button-collapse.main").click(function(){$(".button-collapse.more").sideNav("hide")}).sideNav({menuWidth:264}),$(".button-collapse.more").click(function(){$(".button-collapse.main").sideNav("hide")}).sideNav({edge:"right",menuWidth:264,closeOnClick:!0}),$(".dropdown-button").dropdown(),$(".collapsible").collapsible(),$(".tooltipped").tooltip({delay:50}),$(".parallax").parallax(),$('.modal-trigger, a[href="#contact_form"]').leanModal(),$("select").material_select(),$("input.date").pickadate({format:"yyyy-mm-dd",selectMonths:!0,selectYears:10});var e=$(".w2p_flash").text();e&&Materialize.toast(e,4e3),$(function(){var e=0,t=.2*$(window).height();$(window).scroll(function(a){var n=$(this).scrollTop();return n<192&&$("html").addClass("scroll-up").removeClass("scroll-down"),n<1?$("html").addClass("scroll-at-top"):$("html").removeClass("scroll-at-top"),Math.abs(e-n)<=t?void wfiEvent(function(){e=n},250,"scroll-control"):(n>e?$("html").addClass("scroll-down").removeClass("scroll-up"):$("html").addClass("scroll-up").removeClass("scroll-down"),void(e=n))})})});